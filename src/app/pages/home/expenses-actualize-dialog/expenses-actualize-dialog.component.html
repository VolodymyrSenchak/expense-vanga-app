<h2 class="mat-h2" mat-dialog-title>Actualize expenses</h2>
<mat-dialog-content class="flex-column">
  @if (loadingSrv.loadingOptions().isLoading) {
    <app-loading
      [loadingOptions]="loadingSrv.loadingOptions()"
      [mode]="'spinner'"
    />
  } @else {
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <div formArrayName="money" class="flex-column flex-gap-1">
        @for (expense of form.controls.money.controls; track $index) {
          <div [formGroupName]="$index" class="flex flex-gap-1">
            <mat-form-field appearance="outline">
              <mat-label>Name</mat-label>
              <input matInput type="text" formControlName="name">
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Amount</mat-label>
              <input matInput type="number" formControlName="amount">
            </mat-form-field>

            <mat-form-field appearance="outline" class="flex-1">
              <mat-label>Currency</mat-label>
              <input matInput type="text" formControlName="currency">
            </mat-form-field>

            <button mat-icon-button color="warn" type="button" (click)="removeMoneyPart($index)">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        }
        <button mat-button type="button" (click)="addMoneyPart()">Add more</button>
      </div>

      <div class="flex">
        <button mat-button (click)="onCancel()">Cancel</button>
        <button mat-flat-button color="primary" type="submit" [disabled]="form.invalid">Submit</button>
      </div>
    </form>
  }
</mat-dialog-content>
